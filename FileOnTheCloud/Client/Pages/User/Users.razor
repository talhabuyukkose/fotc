@using Microsoft.AspNetCore.Authorization

@page "/user/users"

@attribute [Authorize(Roles = "Admin")]


<h4 style="margin-top: -3.5rem;position: absolute;z-index: 2;">
    Kullanıcılar
</h4>
<div class="btn-group">
    <AddNewButton Color="secondary" ToolTipStr="Yeni kullanıcı eklemek için tıklayınız..." Caption="Kullanıcı Ekle" OnClick="goCreateUserPage" />
</div>
<br />
<br />
<div class="table table-striped table-responsive table-hover">
    <table class="table">
        <caption>@userlist.Count kullanıcı listelendi</caption>
        <thead>
            <tr>
                <th scope="col"></th>
                <th scope="col">#</th>
                <th scope="col">Adı</th>
                <th scope="col">Soyadı</th>
                <th scope="col">Ünvan</th>
                <th scope="col">Bölüm</th>
                <th scope="col">Yetki</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in userlist)
            {
                <tr>
                    <td>
                        <CustomEditButton IsSmall="true" Caption="" IsOutline="true" OnClick="@(()=>goUpdateUserPage(item.id))" />
                        <DeleteButton IsSmall="true" Caption="" IsOutline="true" OnClick="@(()=>DeleteUser(item.id))" />
                    </td>
                    <th scope="row">@userlist.IndexOf(item)</th>
                    <td>@item.name</td>
                    <td>@item.surname</td>
                    <td>@item.title</td>
                    <td>@item.department</td>
                    <td>@item.emailaddress</td>
                    <td>@item.role</td>
                </tr>
            }
        </tbody>
    </table>
</div>

